import dotenv from "dotenv";
dotenv.config();
import { Server } from "..";
const server = new Server({
    // encryption is bugged rn
    disableEncryption: false,
    shardCount: 2,
    secretKey: process.env.SERVER_SECRET_KEY,
    token: process.env.DISCORD_TOKEN,
});
server.on("close", () => {
    console.warn("SocketShard Server closed.");
});
server.on("connection", (session) => console.log(`Client connected from ${session.socket.remoteAddress}:${session.socket.remotePort}`));
server.on("listening", () => {
    console.log(`SocketShard Server started on ${server.options.hostname}:${server.options.port}!`);
});
server.on("shardInfoSent", (session, shardIds) => {
    console.log(`Client ${session.socket.remoteAddress}:${session.socket.remotePort} got shards: [${shardIds}]`);
    console.log(`Disconnected shards: [${server.disconnectedShardIds}], connected shards: [${server.connectedShardIds}]`);
});
server.on("clientDisconnected", (session) => {
    console.log(`Client ${session.socket.remoteAddress}:${session.socket.remotePort} disconnected with shards: [${session.shardIds}]`);
    console.log(`Disconnected shards: [${server.disconnectedShardIds}], connected shards: [${server.connectedShardIds}]`);
});
server.start();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2V4YW1wbGVzL3NlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLE1BQU0sTUFBTSxRQUFRLENBQUM7QUFFNUIsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRWhCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFFNUIsTUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUM7SUFDeEIsMEJBQTBCO0lBQzFCLGlCQUFpQixFQUFFLEtBQUs7SUFDeEIsVUFBVSxFQUFFLENBQUM7SUFDYixTQUFTLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUI7SUFDeEMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYTtDQUNqQyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7SUFDdEIsT0FBTyxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQzdDLENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUNsQyxPQUFPLENBQUMsR0FBRyxDQUNULHlCQUF5QixPQUFPLENBQUMsTUFBTSxDQUFDLGFBQWEsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUNyRixDQUNGLENBQUM7QUFFRixNQUFNLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7SUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxpQ0FBaUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FDbkYsQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUU7SUFDL0MsT0FBTyxDQUFDLEdBQUcsQ0FDVCxVQUFVLE9BQU8sQ0FBQyxNQUFNLENBQUMsYUFBYSxJQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxpQkFBaUIsUUFBUSxHQUFHLENBQ2hHLENBQUM7SUFFRixPQUFPLENBQUMsR0FBRyxDQUNULHlCQUF5QixNQUFNLENBQUMsb0JBQW9CLHlCQUF5QixNQUFNLENBQUMsaUJBQWlCLEdBQUcsQ0FDekcsQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFO0lBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBVSxPQUFPLENBQUMsTUFBTSxDQUFDLGFBQWEsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLFVBQVUsK0JBQStCLE9BQU8sQ0FBQyxRQUFRLEdBQUcsQ0FDdEgsQ0FBQztJQUNGLE9BQU8sQ0FBQyxHQUFHLENBQ1QseUJBQXlCLE1BQU0sQ0FBQyxvQkFBb0IseUJBQXlCLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxDQUN6RyxDQUFDO0FBQ0osQ0FBQyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMifQ==